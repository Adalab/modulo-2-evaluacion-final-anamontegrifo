"use strict";const form=document.querySelector(".form"),inputSearch=document.querySelector(".js-inputSearch"),btnSearch=document.querySelector(".js-btnSearch"),listContainer=document.querySelector(".found-list"),favContainer=document.querySelector(".js-favlist"),favSection=document.querySelector(".js-fav"),defaultImage="https://via.placeholder.com/210x295/ffffff/666666/?text=TV";let series=[],favourites=[];function preventDefault(e){e.preventDefault()}function completeUrl(){return"//api.tvmaze.com/search/shows?q="+inputSearch.value}function getTheSearchResult(){let e=completeUrl();fetch(e).then(e=>e.json()).then(e=>{series=e,addCards()})}function isFavourite(e){return void 0!==favourites.find(t=>t.show.id===e.show.id)}function addCards(){let e="";listContainer.innerHTML="";for(const t of series){e=isFavourite(t)?"favourite":"estandar";let a=document.createElement("div");a.classList.add("found-list__card","js-foundCard",""+e),a.id=t.show.id;let s=document.createElement("img");null===t.show.image?s.src="https://via.placeholder.com/210x295/ffffff/666666/?text=TV":s.src=t.show.image.medium,s.setAttribute("class","found-list__image");let n=document.createElement("h2");n.setAttribute("class","found-list__title");let d=document.createTextNode(t.show.name);n.appendChild(d),a.appendChild(s),listContainer.appendChild(a),a.appendChild(n),listContainer.appendChild(a)}listenToTheCards()}function listenToTheCards(){const e=document.querySelectorAll(".js-foundCard");for(const t of e)t.addEventListener("click",handleFavCards)}function handleFavCards(e){const t=parseInt(e.currentTarget.id),a=series.find(e=>e.show.id===t),s=favourites.findIndex(e=>e.show.id===t);-1===s?favourites.push(a):favourites.splice(s,1),setLS(),AddContentFavCards(),addCards()}function deleteFavIcons(e){const t=parseInt(e.currentTarget.id),a=(favourites.find(e=>e.show.id===t),favourites.findIndex(e=>e.show.id===t));-1!==a&&favourites.splice(a,1),setLS(),AddContentFavCards(),addCards()}function AddContentFavCards(){favSection.innerHTML="";let e=document.createElement("ul");e.classList.add("fav__menu","fav-list","js-favlist");let t=document.createElement("div");t.classList.add("fav__header");let a=document.createElement("h2");a.classList.add("fav__headline");let s=document.createTextNode("Tus series favoritas");a.appendChild(s);let n=document.createElement("button");n.classList.add("fav__reset","js-reset");let d=document.createTextNode("Reset");n.appendChild(d),t.appendChild(a),t.appendChild(n),e.appendChild(t);for(const t of favourites){let a=document.createElement("li");a.classList.add("fav-list__card","js-favCard"),a.id=t.show.id;let s=document.createElement("img");null===t.show.image?s.src="https://via.placeholder.com/210x295/ffffff/666666/?text=TV":s.src=t.show.image.medium,s.setAttribute("class","fav-list__image");let n=document.createElement("h2");n.setAttribute("class","fav-list__title");let d=document.createTextNode(t.show.name);n.appendChild(d);let i=document.createElement("i");i.setAttribute("class","fas fa-times-circle fav-list__icon js-icon"),i.id=t.show.id,a.appendChild(s),a.appendChild(n),a.appendChild(i),e.appendChild(a),favSection.appendChild(e);document.querySelector(".js-reset").addEventListener("click",reset);const o=document.querySelectorAll(".js-icon");for(const e of o)e.addEventListener("click",deleteFavIcons)}listenToTheCards()}function setLS(){localStorage.setItem("favourites",JSON.stringify(favourites))}function getLS(){favourites=JSON.parse(localStorage.getItem("favourites")),AddContentFavCards(),addCards()}function reset(){favourites=[],favSection.innerHTML="",setLS(),addCards(),localStorage.clear()}null!==localStorage.getItem("favourites")&&getLS(),form.addEventListener("submit",preventDefault),btnSearch.addEventListener("click",getTheSearchResult);